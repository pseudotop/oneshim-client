[profile.release]
opt-level = "z"
lto = true
codegen-units = 1
strip = true
panic = "abort"

# macOS Apple Silicon (M1/M2/M3)
[target.aarch64-apple-darwin]
rustflags = ["-C", "target-cpu=native"]

# macOS Intel
[target.x86_64-apple-darwin]
rustflags = ["-C", "target-cpu=x86-64-v2"]

# Windows x64
[target.x86_64-pc-windows-msvc]
rustflags = ["-C", "target-feature=+crt-static"]

# Linux x64
[target.x86_64-unknown-linux-gnu]
rustflags = ["-C", "target-cpu=x86-64-v2"]
